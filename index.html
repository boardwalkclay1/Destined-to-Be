<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Destined to Be – Spirit Numerology</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">

  <!-- Socket.IO client -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"
          integrity="sha384-mGQJfoTqG91d9s0PCMsoKn5aIJL3tYDIymKvGJTd6RFK5g7ImS1xM63tZAkR0q8p"
          crossorigin="anonymous"></script>

  <!-- Leaflet (map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-sA+4JtJtM6+g7Vjv8s+2kLQvP0LhM651Emp01/O9vr0="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-SmSr9w+ywH6kRykGq5H3ZiZsa1onbI7VUu01sB8Jk0A="
    crossorigin=""
  ></script>
</head>
<body>
  <div id="app">
    <!-- Auth -->
    <section id="screen-auth" class="screen">
      <div class="auth-card">
        <h1>Destined to Be</h1>
        <p class="subtitle">Spirit-guided numerology, live and cosmic.</p>

        <div id="auth-toggle">
          <button id="btn-show-login" class="tab active">Login</button>
          <button id="btn-show-signup" class="tab">Sign up</button>
        </div>

        <form id="form-login" class="auth-form">
          <label>Username
            <input type="text" id="login-username" autocomplete="username">
          </label>
          <label>PIN / Password
            <input type="password" id="login-password" autocomplete="current-password">
          </label>
          <button type="submit" class="primary">Enter</button>
          <p class="auth-note">Free tier gives life path, daily tips, and number meanings.</p>
          <p id="login-error" class="error"></p>
        </form>

        <form id="form-signup" class="auth-form hidden">
          <label>Username
            <input type="text" id="signup-username" autocomplete="username">
          </label>
          <label>PIN / Password
            <input type="password" id="signup-password" autocomplete="new-password">
          </label>
          <button type="submit" class="primary">Create account</button>
          <p class="auth-note">Stored locally + synced by Socket.IO backend.</p>
          <p id="signup-error" class="error"></p>
        </form>
      </div>
    </section>

    <!-- Main app layout -->
    <section id="screen-main" class="screen hidden">
      <header class="topbar">
        <div class="topbar-left">
          <h2 id="topbar-title">Dashboard</h2>
          <span id="topbar-tier-pill" class="tier-pill">Free</span>
        </div>
        <button id="btn-open-settings" class="icon-button" title="Settings">⚙</button>
      </header>

      <nav class="nav">
        <button data-route="dashboard" class="nav-btn active">Dashboard</button>
        <button data-route="numbers" class="nav-btn">My Numbers</button>
        <button data-route="guidance" class="nav-btn">Daily</button>
        <button data-route="spirit" class="nav-btn">Spirit Guide</button>
        <button data-route="connections" class="nav-btn">Connections</button>
        <button data-route="readings" class="nav-btn">Readings</button>
      </nav>

      <main class="content">
        <!-- Dashboard -->
        <section id="view-dashboard" class="view active">
          <h3>Welcome back</h3>

          <div id="dashboard-profile" class="card profile-card"></div>

          <div id="dashboard-life-path" class="card"></div>
          <div id="dashboard-daily-tip" class="card"></div>

          <div class="card">
            <h4>Quick actions</h4>
            <div class="quick-actions">
              <button id="btn-go-enter-number" class="secondary">Interpret a number you saw</button>
              <button id="btn-go-upgrade" class="primary">View tiers & unlock</button>
            </div>
          </div>
        </section>

        <!-- My Numbers -->
        <section id="view-numbers" class="view">
          <h3>My core numbers</h3>
          <div id="numbers-core" class="card"></div>
          <div id="numbers-advanced" class="card"></div>

          <div class="card">
            <h4>Number you keep seeing</h4>
            <label>Enter a number
              <input type="text" id="input-seen-number" placeholder="111, 222, 1234..." />
            </label>
            <button id="btn-interpret-number" class="primary small-btn">Interpret</button>
            <div id="seen-number-result" class="tip"></div>
          </div>
        </section>

        <!-- Daily Guidance -->
        <section id="view-guidance" class="view">
          <h3>Daily guidance</h3>
          <div id="daily-free" class="card"></div>
          <div id="daily-pro" class="card locked">
            <div class="lock-overlay">
              <p>Unlock Pro to see personalized career and family guidance.</p>
              <button id="btn-upgrade-from-daily" class="primary small-btn">Upgrade to Pro</button>
            </div>
            <div id="daily-pro-content" class="hidden"></div>
          </div>
        </section>

        <!-- Spirit Guide -->
        <section id="view-spirit" class="view">
          <h3>Spirit Guide</h3>
          <div class="card">
            <p>Your Spirit Guide weaves your numbers and signs into live insight.</p>
            <label>Your current focus
              <select id="spirit-focus">
                <option value="overview">Life overview</option>
                <option value="career">Career & money</option>
                <option value="relationships">Relationships & love</option>
                <option value="growth">Personal growth & healing</option>
              </select>
            </label>
            <label>Optional: ask Spirit a question for today
              <input type="text" id="spirit-question" placeholder="What should I focus on this month?" />
            </label>
            <button id="btn-spirit-generate" class="primary small-btn">Call in Spirit</button>
          </div>

          <div id="spirit-output" class="card"></div>
        </section>

        <!-- Connections -->
        <section id="view-connections" class="view">
          <div class="view-header">
            <h3>Connections</h3>
            <button id="btn-add-connection" class="primary small-btn">Add friend</button>
          </div>

          <div class="card">
            <h4>Find user</h4>
            <label>Username
              <input type="text" id="connections-search" placeholder="friend username" />
            </label>
            <button id="btn-connections-search" class="secondary small-btn">Send friend request</button>
            <div id="connections-search-result" class="tip"></div>
          </div>

          <div class="card">
            <h4>Share location</h4>
            <label class="toggle-row">
              <input type="checkbox" id="connections-share-location" />
              <span>Show me on the map when I’m online</span>
            </label>
            <div id="connections-map" class="map-container"></div>
          </div>

          <div id="connections-main" class="card">
            <div class="connections-columns">
              <div class="connections-list">
                <h4>Friends</h4>
                <div id="connections-friends"></div>
              </div>
              <div class="connections-chat">
                <h4 id="connections-chat-title">Messages</h4>
                <div id="connections-chat-thread" class="messages-thread"></div>
                <div class="messages-input">
                  <textarea id="connections-chat-input" rows="2" placeholder="Type a message..."></textarea>
                  <button id="connections-chat-send" class="primary small-btn">Send</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Readings -->
        <section id="view-readings" class="view">
          <h3>Readings</h3>
          <div class="card">
            <h4>Free life path reading</h4>
            <div id="reading-life-path"></div>
          </div>

          <div class="card">
            <h4>Astrology</h4>
            <label>Sun sign
              <select id="reading-sun-sign"></select>
            </label>
            <label>Moon sign
              <select id="reading-moon-sign"></select>
            </label>
            <button id="reading-save-astro" class="secondary small-btn">Save astro profile</button>
          </div>

          <div class="card locked" id="card-advanced-readings">
            <div class="lock-overlay">
              <p>Advanced readings available with Pro Numerology.</p>
              <button id="btn-upgrade-readings" class="primary small-btn">Unlock Pro</button>
            </div>
            <div id="reading-advanced" class="hidden"></div>
          </div>
        </section>
      </main>
    </section>

    <!-- Settings modal -->
    <div id="modal-settings" class="modal hidden">
      <div class="modal-content">
        <header class="modal-header">
          <h3>Settings & profile</h3>
          <button id="btn-close-settings" class="icon-button">✕</button>
        </header>
        <div class="modal-body">
          <section class="card">
            <h4>Profile</h4>
            <div class="avatar-row">
              <div class="avatar-preview" id="settings-avatar-preview">⟳</div>
              <div class="avatar-controls">
                <label class="file-label">
                  Upload avatar
                  <input type="file" id="settings-avatar" accept="image/*" />
                </label>
              </div>
            </div>
            <label>Name
              <input type="text" id="settings-name" />
            </label>
            <label>Bio
              <textarea id="settings-bio" rows="3"></textarea>
            </label>
            <label>Birthdate
              <input type="date" id="settings-birthdate" />
            </label>
            <button id="btn-save-profile" class="primary small-btn">Save profile</button>
          </section>

          <section class="card">
            <h4>Appearance</h4>
            <label>
              Theme
              <select id="settings-theme">
                <option value="dark">Cosmic dark</option>
                <option value="light">Starlight</option>
              </select>
            </label>
          </section>

          <section class="card">
            <h4>Access and tiers</h4>
            <p id="tier-status"></p>
            <button id="btn-open-paypal-pro" class="secondary small-btn">Upgrade to Pro (PayPal)</button>
            <button id="btn-open-paypal-social" class="secondary small-btn">Unlock Cosmic Connect (PayPal)</button>
          </section>

          <section class="card danger">
            <h4>Data</h4>
            <button id="btn-export-data" class="secondary small-btn">Export data (JSON)</button>
            <button id="btn-reset-all" class="secondary small-btn">Reset all data on this device</button>
            <button id="btn-logout" class="secondary small-btn">Log out</button>
          </section>
        </div>
      </div>
    </div>

    <div id="toast" class="toast hidden"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
